local player = game:GetService("Players").LocalPlayer
local playerName = player.Name
getgenv().DuyHub_AllowedName = playerName
local StarterGui = game:GetService("StarterGui")
pcall(function()
    StarterGui:SetCore("SendNotification", {
        Title = "DuyHub System",
        Text = "Loading...",
        Duration = 3
    })
end)

local VERCEL_DOMAIN = "https://duyhub.vercel.app" 

local api_link = VERCEL_DOMAIN .. "/api/ms-mother?account=" .. tostring(_G.account) .. "&name=" .. tostring(playerName)

local success, response = pcall(function()
    return game:HttpGet(api_link)
end)

if not success then
    player:Kick("❌ DuyHub: Lỗi mạng! Không thể kết nối đến máy chủ.")
    return
end

-- Nếu máy chủ Vercel trả về lệnh Kick (Sai User hoặc Sai Nick Roblox)
if string.find(response, "Kick") then
    loadstring(response)()
    return
end

-- Tải Code và Chạy
local loadedScript, err = loadstring(response)
if loadedScript then
    loadedScript()
else
    player:Kick("❌ DuyHub: Lỗi giải mã dữ liệu từ máy chủ!")
end
